## 权限中心整体设计
### 技术选型
#### 1.权限模型
采用RBAC模型，基于角色的访问控制

<br/>

#### 2. 权限框架
主要是采用Spring Cloud Oauth2, Spring Boot Security来实现

<br/>

#### 3.为什么使用spring security而不使用shiro
- shiro功能简单，很多功能都需要去二次开发定制，相反spring security功能十分强大，提供多种认证，鉴权方式
- shiro在目前的前后端分离的项目中使用，真的一堆坑，首先默认的就是需要配置登录路径，首页等等路径，但在现在前后端分离的
项目中，这样的方式存在很大的问题，需要去定制化二次开发，修改返回信息为json；相比spring security就只关注权限认证，不去做任何
操作前端路由的事情
- shiro依赖性弱，可以独立运行，spring security依赖于spring，spring生态基础
- shiro默认是通过session来认证存储用户信息，但在目前的分布式体系中，应该避免使用原生session，防止分布式session问题，所以shiro
又需要定制二次开发，相反这里选型的spring security oauth2是基于token的方式来进行存储认证授权，实现无状态。

<br/>

#### 4.为什么使用oauth2(关于[oauth2](http://www.ruanyifeng.com/blog/2019/04/oauth_design.html))
- 将鉴权与业务服务进行了隔离，实现了解耦
- 可以实现多点登录，这是一种替代单点登录的方案
- 可以使Web应用程序(客户端)访问属于用户而不属于Web应用程序(客户端)的资源
- 可以将身份认证委托给信任的第三方，而不必担心会泄露用户的真实资料，这里怎么说呢，就是假如现在用一个网站需要QQ登录，获取你的
QQ信息，最简单的方式就是，你输入QQ账号和密码，这样这个网站就能去登录你的QQ，获取信息，但这样肯定存在很多安全方面的问题，所以
oauth2就可以解决这样的问题，多了一层鉴权层出来，也就是你网站只需要跟鉴权层进行交互，获取token，然后携带这个token去对应的服务器登录就行了


<br/>

### 为什么要弄成权限中心
- 首先是使用了spring cloud oauth2 + security来实现，原本就需要一个认证授权服务出来，所以应该让这个服务服务于整个公司的所有
项目的权限，这也是oauth2的一个概念
- 弄成了这样的一个权限中心，就可以让所有不同的应用程序，打个比方，现在有a项目，如果是集成在项目内部的权限，就会出现一个问题，当我
有一个b项目，需要引入权限体系的时候，那么只能去a项目里面去抽丝剥茧，这样会很麻烦，因为本来就是属于一个公司的东西，所以用户体系一样，
这里就可以抽象出这个权限中心，当b项目需要接入权限体系的时候，直接就去引入对应的依赖变成资源服务器，让所有的应用程序（客户端）去跟认证授权层
进行交互。
- 因为是基于RBAC模型，所以只要数据库表设计好了，在部署维护配置方面其实只是多了一个服务出来，其它接入的应用程序只要做三步就可以接入这个体系
- oauth2还有一个client的一个认证，那也是说可以区分不同的项目应用程序，这也是一个很强大的功能，通过这个来做到管理所有的应用程序，不同的client，
我们可以定制token生成不一样，时长各方面不一样，并且oauth2是需要认证client的，也就是只有带上client的标识才能走oauth2的逻辑
- 提供统一的一个ui界面出来，里面管理着所有接入权限中心的client，通过ui管理所有不同项目的权限体系

<br/>

系统架构图：
![01](/images/系统架构图.png)
